#!/usr/bin/env ruby

require 'github-key-upload'
require 'slop'

opts = Slop.parse(:longest_flag => 8, :help => true) do
  banner "github-key-upload [options]\n"
  on :k, :key=, "Path to the file containing the public key to upload"
  on :t, :title=, "Key Title"
  on :u, :user=, "Github username"
  on :P, :password=, "Github password"
end

if (opts[:k].nil? || opts[:u].nil? || opts[:P].nil? || opts[:t].nil?)
  puts opts.help
else
  Github::Key::Upload.upload(opts.to_hash)
end
